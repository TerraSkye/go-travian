<h1>
    Map (<span id="x">{{ .Coordinate.X}}</span>|<span id="y">{{ .Coordinate.Y}}</span>)
</h1>

<div id="map">

    <div id="map_content">
        {{range $XCoordinate,$XAxis := .Tiles}}
            {{range $YCoordinate,$Tile := $XAxis}}
                <div id="i_{{  $XCoordinate }}_{{ $YCoordinate }}" class="{{ $Tile.Image}}"></div>
            {{end}}
        {{end}}
    </div>
    <div id="map_rulers">
        <div id="mx0"> {{with $tile := index .Tiles 0 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my0">{{with $tile := index .Tiles 0 0 }}{{ $tile.Coordinate.Y}} {{end}}</div>
        <div id="mx1">{{with $tile := index .Tiles 1 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my1">{{with $tile := index .Tiles 0 1 }}{{ $tile.Coordinate.Y}} {{end}}</div>
        <div id="mx2">{{with $tile := index .Tiles 2 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my2">{{with $tile := index .Tiles 0 2 }}{{ $tile.Coordinate.Y}} {{end}}</div>
        <div id="mx3">{{with $tile := index .Tiles 3 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my3">{{with $tile := index .Tiles 0 3 }}{{ $tile.Coordinate.Y}} {{end}}</div>
        <div id="mx4">{{with $tile := index .Tiles 4 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my4">{{with $tile := index .Tiles 0 4 }}{{ $tile.Coordinate.Y}} {{end}}</div>
        <div id="mx5">{{with $tile := index .Tiles 5 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my5">{{with $tile := index .Tiles 0 5 }}{{ $tile.Coordinate.Y}} {{end}}</div>
        <div id="mx6">{{with $tile := index .Tiles 6 0 }}{{ $tile.Coordinate.X}} {{end}}</div>
        <div id="my6">{{with $tile := index .Tiles 0 6 }}{{ $tile.Coordinate.Y}} {{end}}</div>
    </div>

    <map id="map_overlay" name="map_overlay">
        {{with $tile := index .Tiles 0 0 }}
            <area id="a_0_0" shape="poly" coords="53, 137, 90, 157, 53, 177, 16, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 0 1 }}
            <area id="a_0_1" shape="poly" coords="89, 117, 126, 137, 89, 157, 52, 137" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 0 2 }}
            <area id="a_0_2" shape="poly" coords="125, 97, 162, 117, 125, 137, 88, 117" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 0 3 }}
            <area id="a_0_3" shape="poly" coords="161, 77, 198, 97, 161, 117, 124, 97" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 0 4 }}
            <area id="a_0_4" shape="poly" coords="197, 57, 234, 77, 197, 97, 160, 77" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 0 5 }}
            <area id="a_0_5" shape="poly" coords="233, 37, 270, 57, 233, 77, 196, 57" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 0 6 }}
            <area id="a_0_6" shape="poly" coords="269, 17, 306, 37, 269, 57, 232, 37" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 0 }}
            <area id="a_1_0" shape="poly" coords="90, 157, 127, 177, 90, 197, 53, 177" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 1 }}
            <area id="a_1_1" shape="poly" coords="126, 137, 163, 157, 126, 177, 89, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 2 }}
            <area id="a_1_2" shape="poly" coords="162, 117, 199, 137, 162, 157, 125, 137" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 3 }}
            <area id="a_1_3" shape="poly" coords="198, 97, 235, 117, 198, 137, 161, 117" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 4 }}
            <area id="a_1_4" shape="poly" coords="234, 77, 271, 97, 234, 117, 197, 97" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 5 }}
            <area id="a_1_5" shape="poly" coords="270, 57, 307, 77, 270, 97, 233, 77" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 1 6 }}
            <area id="a_1_6" shape="poly" coords="306, 37, 343, 57, 306, 77, 269, 57" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 0 }}
            <area id="a_2_0" shape="poly" coords="127, 177, 164, 197, 127, 217, 90, 197" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 1 }}
            <area id="a_2_1" shape="poly" coords="163, 157, 200, 177, 163, 197, 126, 177" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 2 }}
            <area id="a_2_2" shape="poly" coords="199, 137, 236, 157, 199, 177, 162, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 3 }}
            <area id="a_2_3" shape="poly" coords="235, 117, 272, 137, 235, 157, 198, 137" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 4 }}
            <area id="a_2_4" shape="poly" coords="271, 97, 308, 117, 271, 137, 234, 117" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 5 }}
            <area id="a_2_5" shape="poly" coords="307, 77, 344, 97, 307, 117, 270, 97" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 2 6 }}
            <area id="a_2_6" shape="poly" coords="343, 57, 380, 77, 343, 97, 306, 77" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 0 }}
            <area id="a_3_0" shape="poly" coords="164, 197, 201, 217, 164, 237, 127, 217" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 1 }}
            <area id="a_3_1" shape="poly" coords="200, 177, 237, 197, 200, 217, 163, 197" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 2 }}
            <area id="a_3_2" shape="poly" coords="236, 157, 273, 177, 236, 197, 199, 177" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 3 }}
            <area id="a_3_3" shape="poly" coords="272, 137, 309, 157, 272, 177, 235, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 4 }}
            <area id="a_3_4" shape="poly" coords="308, 117, 345, 137, 308, 157, 271, 137" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 5 }}
            <area id="a_3_5" shape="poly" coords="344, 97, 381, 117, 344, 137, 307, 117" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 3 6 }}
            <area id="a_3_6" shape="poly" coords="380, 77, 417, 97, 380, 117, 343, 97" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 0 }}
            <area id="a_4_0" shape="poly" coords="201, 217, 238, 237, 201, 257, 164, 237" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 1 }}
        <area id="a_4_1" shape="poly" coords="237, 197, 274, 217, 237, 237, 200, 217" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 2 }}
            <area id="a_4_2" shape="poly" coords="273, 177, 310, 197, 273, 217, 236, 197" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 3 }}
            <area id="a_4_3" shape="poly" coords="309, 157, 346, 177, 309, 197, 272, 177" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 4 }}
            <area id="a_4_4" shape="poly" coords="345, 137, 382, 157, 345, 177, 308, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 5 }}
            <area id="a_4_5" shape="poly" coords="381, 117, 418, 137, 381, 157, 344, 137" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 4 6 }}
            <area id="a_4_6" shape="poly" coords="417, 97, 454, 117, 417, 137, 380, 117" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 0 }}
            <area id="a_5_0" shape="poly" coords="238, 237, 275, 257, 238, 277, 201, 257" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 1 }}
            <area id="a_5_1" shape="poly" coords="274, 217, 311, 237, 274, 257, 237, 237" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 2 }}
            <area id="a_5_2" shape="poly" coords="310, 197, 347, 217, 310, 237, 273, 217" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 3 }}
            <area id="a_5_3" shape="poly" coords="346, 177, 383, 197, 346, 217, 309, 197" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 4 }}
            <area id="a_5_4" shape="poly" coords="382, 157, 419, 177, 382, 197, 345, 177" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 5 }}
            <area id="a_5_5" shape="poly" coords="418, 137, 455, 157, 418, 177, 381, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 5 6 }}
            <area id="a_5_6" shape="poly" coords="454, 117, 491, 137, 454, 157, 417, 137" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 0 }}
            <area id="a_6_0" shape="poly" coords="275, 257, 312, 277, 275, 297, 238, 277" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 1 }}
            <area id="a_6_1" shape="poly" coords="311, 237, 348, 257, 311, 277, 274, 257" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 2 }}
            <area id="a_6_2" shape="poly" coords="347, 217, 384, 237, 347, 257, 310, 237" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 3 }}
            <area id="a_6_3" shape="poly" coords="383, 197, 420, 217, 383, 237, 346, 217" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 4 }}
            <area id="a_6_4" shape="poly" coords="419, 177, 456, 197, 419, 217, 382, 197" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 5 }}
            <area id="a_6_5" shape="poly" coords="455, 157, 492, 177, 455, 197, 418, 177" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}
        {{with $tile := index .Tiles 6 6 }}
            <area id="a_6_6" shape="poly" coords="491, 137, 528, 157, 491, 177, 454, 157" title="{{ $tile.Id}}" href="karte.php?d={{ $tile.Id}}&amp;c=71">
        {{end}}

        <area id="ma_n1" href="karte.php?z={{ .Coordinate.North 1}}" coords="422,67,25" shape="circle" title="North">
        <area id="ma_n2" href="karte.php?z={{ .Coordinate.East 1}}" coords="427,254,25" shape="circle" title="East">
        <area id="ma_n3" href="karte.php?z={{ .Coordinate.South 1}}" coords="119,255,25" shape="circle" title="South">
        <area id="ma_n4" href="karte.php?z={{ .Coordinate.West 1}}" coords="114,63,25" shape="circle" title="West">

    </map>
    <img id="map_links" src="/assets/img/x.gif" usemap="#map_overlay">
    <a id="map_makelarge" href="#" onclick="PopupMap(35153);">
        <img class="ml" src="/assets/img/x.gif" alt="large map" title="Large Map">
    </a> <img id="map_navibox" src="/assets/img/x.gif" usemap="#map_navibox">
    <map name="map_navibox">
        <area id="ma_n1p7" href="karte.php?z={{ .Coordinate.North 7}}" coords="51,15,73,3,95,15,73,27" shape="poly"
              title="North">
        <area id="ma_n2p7" href="karte.php?z={{ .Coordinate.East 7}}" coords="51,41,73,29,95,41,73,53" shape="poly"
              title="East">
        <area id="ma_n3p7" href="karte.php?z={{ .Coordinate.South 7}}" coords="4,41,26,29,48,41,26,53" shape="poly"
              title="South">
        <area id="ma_n4p7" href="karte.php?z={{ .Coordinate.West 7}}" coords="4,15,26,3,48,15,26,27" shape="poly"
              title="West">
    </map>
    {{/*    <map name="map_navibox">*/}}
    {{/*        <area id="ma_n1p7" href="karte.php?z=33746" coords="51,15,73,3,95,15,73,27" shape="poly" title="North">*/}}
    {{/*        <area id="ma_n2p7" href="karte.php?z=35146" coords="51,41,73,29,95,41,73,53" shape="poly" title="East">*/}}
    {{/*        <area id="ma_n3p7" href="karte.php?z=36560" coords="4,41,26,29,48,41,26,53" shape="poly" title="South">*/}}
    {{/*        <area id="ma_n4p7" href="karte.php?z=35160" coords="4,15,26,3,48,15,26,27" shape="poly" title="West">*/}}
    {{/*    </map>*/}}
    <div id="map_coords">
        <form name="map_coords" method="post" action="karte.php">
            <span>x </span><input id="mcx" class="text" name="xp" value="{{ .Coordinate.X}}" maxlength="4">
            <span>y </span><input id="mcy" class="text" name="yp" value="{{ .Coordinate.Y}}" maxlength="4">
            <input type="image" id="btn_ok" class="dynamic_img" value="ok" name="s1" src="/assets/img/x.gif"  alt="OK"><br><br>
        </form>
    </div>
    <table cellpadding="1" cellspacing="1" id="map_infobox" class="default">
        <thead>
        <tr>
            <th colspan="2">Details</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th>Player</th>
            <td>-</td>
        </tr>
        <tr>
            <th>Population</th>
            <td>-</td>
        </tr>
        <tr>
            <th>Alliance</th>
            <td>-</td>
        </tr>
        </tbody>
    </table>
</div>


<script type="text/javascript">
    var text_k = {};
    text_k.details = 'Details';
    text_k.spieler = 'Player';
    text_k.einwohner = 'Population';
    text_k.allianz = 'Alliance';
    text_k.verlassenes_tal = 'Abandoned valley';
    text_k.besetztes_tal = 'Occupied oasis';
    text_k.freie_oase = 'Unoccupied oasis';
    var text_x = {};
    text_x.r1 = 'Lumber';
    text_x.r2 = 'Clay';
    text_x.r3 = 'Iron';
    text_x.r4 = 'Crop';
    m_c.az = {
        // n1 => north 1 tile
        "n1": {{ .Coordinate.North 1}},
        "n1p7": {{ .Coordinate.North 7}}, // north 7
        "n2": {{ .Coordinate.East 1}},
        "n2p7": {{ .Coordinate.East 7}},
        "n3": {{ .Coordinate.South 1}},
        "n3p7": {{ .Coordinate.South 7}},
        "n4": {{ .Coordinate.West 1}},
        "n4p7": {{ .Coordinate.West 7}}
    };
    m_c.ad = {{.Tiles}}
        m_c.z = {"x":{{ .Coordinate.X}}, "y":{{ .Coordinate.Y}}};
    m_c.size = 7;
    m_c.world_max = {{.Size}};
    var mdim = {"x": 7, "y": 7, "rad": 3};
    var mmode = 0;

    function init_local() {
        map_init();
    }
</script>